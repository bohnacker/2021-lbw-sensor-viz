{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte",
    "ValueBox.svelte",
    "WidgetUser.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import { appActive, dataLatest, dataByTime, dataByUser } from './stores.js';\n  import WidgetUser from './WidgetUser.svelte';\n\n  // $: console.log($dataLatest);\n  // $: console.log($dataByTime);\n  // $: console.log($dataByUser);\n\n  let showGraphs = true;\n\n  $: userdataArray = Object.entries($dataByUser);\n\n\tfunction toggleShowGraphs() {\n    showGraphs = !showGraphs;\n  }\n\n</script>\n\n\n<!-- ------------------------------------------------------------ -->\n\n\n<div id='head'>\n\n  <div style='flex-grow: 1'>\n    <h2>Laborwoche Dashboard</h2>\n  </div>\n\n  <!-- <div>\n    <button on:click={toggleShowGraphs}>\n      {#if showGraphs}\n        Hide Graphs\n      {:else}\n        Show Graphs\n      {/if}\n    </button>\n  </div> -->\n\n</div>\n\n<div id='user-widgets'>\n  <!-- {#if userdataArray[0]} \n    <WidgetUser data={userdataArray[0]} {showGraphs}/> \n  {/if} -->\n  {#each userdataArray as userdata (userdata[0])}\n\t  <WidgetUser data={userdata} {showGraphs}/>\n  {/each}\n</div>\n\n\n<!-- ------------------------------------------------------------ -->\n\n\n<style>\n  #head {\n    margin: 10px;\n    display: flex;\n    align-items: center;\n  }\n</style>",
    "<script>\n  import ValueGraph from \"./ValueGraph.svelte\";\n\n  export let dataLatest;\n  export let dataStream;\n  export let showGraph = false;\n\n</script>\n\n\n<!-- ------------------------------------------------------------ -->\n\n\n<div class='payload-param' on:click={showGraph = !showGraph}>\n  <div class='key-value-box'>\n    <span class='param-key' style='color:{dataLatest.color}'>{dataLatest.key}</span>\n    <span class='param-value'>{dataLatest.value}</span>\n  </div>\n  {#if showGraph}\n    <div class='value-graph'><ValueGraph data={dataStream} height={40}/></div>\n  {/if}\n</div>\n\n\n<!-- ------------------------------------------------------------ -->\n\n\n<style>\n \n  .payload-param {\n    font-size: small;\n    display: flex;\n    flex-direction: column;\n    /* flex-grow: 1; */\n    border-bottom: 1px solid #0004;\n    padding-top: 4px;\n    padding-bottom: 4px;\n    justify-content: space-between;\n  }\n\n  .key-value-box {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n  }\n\n  .payload-param:hover {\n    background-color: #0001;\n  }\n\n  .param-key {\n    display: flex;\n    flex-grow: 1;\n    /* color: tomato; */\n  }\n\n  .param-value {\n    font-variant-numeric: tabular-nums;\n    text-align: right;\n  }\n\n  .value-graph {\n    /* position: absolute; */\n  }\n\n</style>\n\n\n\n\n\n\n",
    "<script>\n  import Timeline from \"./Timeline.svelte\";\n  import ValueBox from \"./ValueBox.svelte\";\n\n  let colorTable = {\n    red:'Red', r:'Red', \n    green:'LimeGreen', g:'LimeGreen', \n    blue:'DodgerBlue', b:'DodgerBlue', \n    yellow:'#EEc700', \n    orange:'DarkOrange', \n    violet:'MediumOrchid', \n    palette:['MediumVioletRed', 'OliveDrab', 'DeepSkyBlue', 'Chocolate', 'SlateBlue', 'Tomato', 'LightSeaGreen']\n  }\n\n\n  // get data of that user in form ['username', {data}]\n  export let data = [];\n  export let showGraphs = true;\n\n  let dataLatest;\n  let dataLatestPayload;\n  let dataLatestPayloadArray = [];  // try to split up the string in values or key-value-pairs\n\n  let dataByKey = {};\n\n  $: {\n    dataLatest = data[1][data[1].length - 1];\n    //console.log(dataLatest);\n    dataLatestPayload = dataLatest.origPayload;\n    try {\n      dataLatestPayload = JSON.parse(dataLatest.origPayload);\n      dataLatestPayload = flattenObject(dataLatestPayload);\n    } catch (error) {}\n  \n    dataLatestPayloadArray = JSON.stringify(dataLatestPayload).split(',');\n    let paletteIndex = 0;\n    for (let i = 0; i < dataLatestPayloadArray.length; i++) {\n      let dat = dataLatestPayloadArray[i];\n      dat = dat.split(':');\n\n      let key, value;\n      if (dat.length == 2) {\n        key = clean(dat[0])\n        value = clean(dat[1])\n      } else {\n        key = 'value_' + i;\n        value = clean(dat[0])\n      }\n      let color = colorTable[key.toLowerCase()] ? colorTable[key.toLowerCase()] : colorTable.palette[paletteIndex++ % colorTable.palette.length];\n      dataLatestPayloadArray[i] = {key:key, value:value, color:color};\n\n      if (!dataByKey[key]) dataByKey[key] = [];\n      dataByKey[key].push({timestamp:dataLatest.timestamp, value:value, color:color});\n      removeOldEntries(dataByKey[key], 5000);\n    }\n    // console.log(dataByKey);\n  }\n\n  function removeOldEntries(arr, millis) {\n    let now = Date.now();\n    if (arr[0]) {\n      while (arr[0].timestamp < now - millis) {\n        arr.shift();\n        if (!arr[0]) break;\n      }\n    }\n  }\n\n\n  function clean(str) {\n    let result = str.match(/[\\d\\w\\.\\-]+/);\n    if (result) return result[0];\n    return false;\n  }\n\n  function flattenObject(obj, prefix) {\n    if (!prefix) prefix = \"\";\n    let res = {};\n    for (let k in obj) {   \n      switch (typeof obj[k]) {\n        case \"object\":\n          let tmp = flattenObject(obj[k], k + '_');\n          for (let kk in tmp) {\n            res[kk] = tmp[kk];\n          }\n          break;\n        default:\n          res[prefix + k] = obj[k];\n      }\n    }\n\n    return res;\n  }\n\n</script>\n\n\n<!-- ------------------------------------------------------------ -->\n\n<div class='widget-box'>\n  <div class='flex-container'>\n\n    <div id='head' class='flex-item'>\n      {data[0].toUpperCase()}\n    </div>\n  \n    <div class='timeline flex-item'>\n      <Timeline data={data[1]} height={10}/>\n    </div>\n  \n    <div id='body' class='flex-item'>\n      <!-- {JSON.stringify(dataLatestPayload, null, 2)} -->\n      {#each dataLatestPayloadArray as dat} \n        <ValueBox dataLatest={dat} dataStream={dataByKey[dat.key]}/>\n      {/each}\n    </div>\n  \n  \n  </div>\n</div>\n\n\n<!-- ------------------------------------------------------------ -->\n\n\n<style>\n  .widget-box {\n    display: inline-block;\n    background-color: white;\n    /* border: 1px solid #0003; */\n    border-radius: 0px;\n    box-shadow: 2px 2px 5px #0003;\n    margin: 10px;\n    padding: 10px;\n    width: 300px;\n    overflow: hidden;\n  }\n\n  .flex-container {\n    display: flex;\n    flex-direction: column;\n    flex-wrap: nowrap;\n    justify-content: flex-start;\n    align-items: flex-start;\n    height: 400px;\n  }\n\n  .flex-item {\n    display: flex;\n    align-self: auto;\n  }\n\n  #head {\n    font-weight: 700;\n    flex-grow: 0;\n    margin-bottom: 5px;\n  }\n\n  #body {\n    /* word-wrap: break-word; */\n    flex-grow: 1;\n    /* margin-bottom: 10px; */\n    flex-direction: column;\n    /* align-items: stretch; */\n    border-top: 1px solid #0004;\n    /* border-bottom: 1px solid #0004; */\n    width: 100%;\n    overflow-y: scroll;\n  }\n\n  .timeline {\n    flex-grow: 0;\n    background-color: hsl(30deg, 100%, 100%);\n    margin-bottom: 5px;\n  }\n\n</style>\n\n\n\n\n\n\n"
  ],
  "names": [],
  "mappings": "AAsDE,KAAK,cAAC,CAAC,AACL,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,AACrB,CAAC;AC7BD,cAAc,eAAC,CAAC,AACd,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CAEtB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAC9B,WAAW,CAAE,GAAG,CAChB,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,AAChC,CAAC,AAED,cAAc,eAAC,CAAC,AACd,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,GAAG,CACnB,eAAe,CAAE,aAAa,AAChC,CAAC,AAED,6BAAc,MAAM,AAAC,CAAC,AACpB,gBAAgB,CAAE,KAAK,AACzB,CAAC,AAED,UAAU,eAAC,CAAC,AACV,OAAO,CAAE,IAAI,CACb,SAAS,CAAE,CAAC,AAEd,CAAC,AAED,YAAY,eAAC,CAAC,AACZ,oBAAoB,CAAE,YAAY,CAClC,UAAU,CAAE,KAAK,AACnB,CAAC,AAED,YAAY,eAAC,CAAC,AAEd,CAAC;AC+DD,WAAW,eAAC,CAAC,AACX,OAAO,CAAE,YAAY,CACrB,gBAAgB,CAAE,KAAK,CAEvB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,KAAK,CAC7B,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,IAAI,CACb,KAAK,CAAE,KAAK,CACZ,QAAQ,CAAE,MAAM,AAClB,CAAC,AAED,eAAe,eAAC,CAAC,AACf,OAAO,CAAE,IAAI,CACb,cAAc,CAAE,MAAM,CACtB,SAAS,CAAE,MAAM,CACjB,eAAe,CAAE,UAAU,CAC3B,WAAW,CAAE,UAAU,CACvB,MAAM,CAAE,KAAK,AACf,CAAC,AAED,UAAU,eAAC,CAAC,AACV,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,IAAI,AAClB,CAAC,AAED,KAAK,eAAC,CAAC,AACL,WAAW,CAAE,GAAG,CAChB,SAAS,CAAE,CAAC,CACZ,aAAa,CAAE,GAAG,AACpB,CAAC,AAED,KAAK,eAAC,CAAC,AAEL,SAAS,CAAE,CAAC,CAEZ,cAAc,CAAE,MAAM,CAEtB,UAAU,CAAE,GAAG,CAAC,KAAK,CAAC,KAAK,CAE3B,KAAK,CAAE,IAAI,CACX,UAAU,CAAE,MAAM,AACpB,CAAC,AAED,SAAS,eAAC,CAAC,AACT,SAAS,CAAE,CAAC,CACZ,gBAAgB,CAAE,IAAI,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CACxC,aAAa,CAAE,GAAG,AACpB,CAAC"
}